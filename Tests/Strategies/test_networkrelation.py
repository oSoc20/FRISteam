"""
Test module for the networkrelation module
"""
import unittest
import sys
import os
PACKAGE_PARENT = '../..'
SCRIPT_DIR = os.path.dirname(os.path.realpath(os.path.join(os.getcwd(), os.path.expanduser(__file__))))
sys.path.append(os.path.normpath(os.path.join(SCRIPT_DIR, PACKAGE_PARENT)))
from Strategies.NetworkRelation.networkrelation import preprocess_abstract, calculate_term_frequency, process_keyword_list, network_relation

class TestNetworkRelation(unittest.TestCase):

    def test_compare_english(self):
        self.assertEqual(calculate_relations("An abstract is a brief summary of a research article, thesis, review, conference proceeding, or any in-depth analysis of a particular subject and is often used to help the reader quickly ascertain the paper's purpose.[1] When used, an abstract always appears at the beginning of a manuscript or typescript, acting as the point-of-entry for any given academic paper or patent application. Abstracting and indexing services for various academic disciplines are aimed at compiling a body of literature for that particular subject. The terms précis or synopsis are used in some publications to refer to the same thing that other publications might call an abstract. In management reports, an executive summary usually contains more information (and often more sensitive information) than the abstract does.",["Abstract", "abstracts", "cat", "dog", "the", "summaries"], "en"), Counter({'abstract': 0.4645161290322581, 'summary': 0.23225806451612904, 'use': 0.04838709677419355, 'particular': 0.03225806451612903, 'subject': 0.03225806451612903, 'paper': 0.03225806451612903, 'academic': 0.03225806451612903, 'publication': 0.03225806451612903, 'information': 0.03225806451612903, 'brief': 0.016129032258064516, 'research': 0.016129032258064516, 'article': 0.016129032258064516, 'thesis': 0.016129032258064516, 'review': 0.016129032258064516, 'conference': 0.016129032258064516, 'proceeding': 0.016129032258064516, 'indepth': 0.016129032258064516, 'analysis': 0.016129032258064516, 'help': 0.016129032258064516, 'reader': 0.016129032258064516, 'quickly': 0.016129032258064516, 'ascertain': 0.016129032258064516, 'purpose1': 0.016129032258064516, 'appear': 0.016129032258064516, 'beginning': 0.016129032258064516, 'manuscript': 0.016129032258064516, 'typescript': 0.016129032258064516, 'act': 0.016129032258064516, 'pointofentry': 0.016129032258064516, 'patent': 0.016129032258064516, 'application': 0.016129032258064516, 'abstracting': 0.016129032258064516, 'indexing': 0.016129032258064516, 'service': 0.016129032258064516, 'discipline': 0.016129032258064516, 'aim': 0.016129032258064516, 'compile': 0.016129032258064516, 'body': 0.016129032258064516, 'literature': 0.016129032258064516, 'term': 0.016129032258064516, 'précis': 0.016129032258064516, 'synopsis': 0.016129032258064516, 'refer': 0.016129032258064516, 'thing': 0.016129032258064516, 'management': 0.016129032258064516, 'report': 0.016129032258064516, 'executive': 0.016129032258064516, 'usually': 0.016129032258064516, 'contain': 0.016129032258064516, 'sensitive': 0.016129032258064516}))

    def test_compare_dutch(self):
        self.assertEqual(calculate_relations("Een alinea is het tekstgedeelte tussen twee inspringingen of tussen twee regels wit, de kleinste eenheid van een tekst die nog uit meerdere zinnen bestaat. De alinea is volgens schrijfadviseur Jan Renkema de belangrijkste bouwsteen van een tekst.[1] Incidenteel kan een alinea ook uit een enkele zin of zelfs uit een woord bestaan, maar alleen ter afwisseling met langere alinea's, bijvoorbeeld om het aanzien van een tekst gevarieerder te maken."), ["alinea", "is", "bestaan", "woorden", "woord"], "nl"), Counter({'woord': 0.532258064516129, 'alinea': 0.3790322580645161, 'bestaan': 0.31451612903225806, 'twee': 0.06451612903225806, 'tekst': 0.06451612903225806, 'zin': 0.06451612903225806, 'tekstgedeelte': 0.03225806451612903, 'inspringing': 0.03225806451612903, 'regel': 0.03225806451612903, 'wit': 0.03225806451612903, 'klein': 0.03225806451612903, 'eenheid': 0.03225806451612903, 'meerdere': 0.03225806451612903, 'schrijfadviseur': 0.03225806451612903, 'jan': 0.03225806451612903, 'renkema': 0.03225806451612903, 'belangrijk': 0.03225806451612903, 'bouwsteen': 0.03225806451612903, 'tekst1': 0.03225806451612903, 'incidenteel': 0.03225806451612903, 'afwisseling': 0.03225806451612903, 'aanzien': 0.03225806451612903, 'gevarieerd': 0.03225806451612903, 'maken': 0.03225806451612903}))

    def test_compare_empty_abstract_en(self):
        self.assertEqual(calculate_relations("", ["Abstract", "abstracts", "cat", "dog", "the", "summaries"], "en"), {})

    def test_compare_empty_abstract_nl(self):
        self.assertEqual(calculate_relations("", ["alinea", "is", "bestaan", "woorden", "woord"], "nl"), {})
    
    def test_compare_empty_keywords_en(self):
        self.assertEqual(calculate_relations("An abstract is a brief summary of a research article, thesis, review, conference proceeding, or any in-depth analysis of a particular subject and is often used to help the reader quickly ascertain the paper's purpose.[1] When used, an abstract always appears at the beginning of a manuscript or typescript, acting as the point-of-entry for any given academic paper or patent application. Abstracting and indexing services for various academic disciplines are aimed at compiling a body of literature for that particular subject. The terms précis or synopsis are used in some publications to refer to the same thing that other publications might call an abstract. In management reports, an executive summary usually contains more information (and often more sensitive information) than the abstract does.", [], "en"),Counter({'abstract': 0.06451612903225806, 'use': 0.04838709677419355, 'summary': 0.03225806451612903, 'particular': 0.03225806451612903, 'subject': 0.03225806451612903, 'paper': 0.03225806451612903, 'academic': 0.03225806451612903, 'publication': 0.03225806451612903, 'information': 0.03225806451612903, 'brief': 0.016129032258064516, 'research': 0.016129032258064516, 'article': 0.016129032258064516, 'thesis': 0.016129032258064516, 'review': 0.016129032258064516, 'conference': 0.016129032258064516, 'proceeding': 0.016129032258064516, 'indepth': 0.016129032258064516, 'analysis': 0.016129032258064516, 'help': 0.016129032258064516, 'reader': 0.016129032258064516, 'quickly': 0.016129032258064516, 'ascertain': 0.016129032258064516, 'purpose1': 0.016129032258064516, 'appear': 0.016129032258064516, 'beginning': 0.016129032258064516, 'manuscript': 0.016129032258064516, 'typescript': 0.016129032258064516, 'act': 0.016129032258064516, 'pointofentry': 0.016129032258064516, 'patent': 0.016129032258064516, 'application': 0.016129032258064516, 'abstracting': 0.016129032258064516, 'indexing': 0.016129032258064516, 'service': 0.016129032258064516, 'discipline': 0.016129032258064516, 'aim': 0.016129032258064516, 'compile': 0.016129032258064516, 'body': 0.016129032258064516, 'literature': 0.016129032258064516, 'term': 0.016129032258064516, 'précis': 0.016129032258064516, 'synopsis': 0.016129032258064516, 'refer': 0.016129032258064516, 'thing': 0.016129032258064516, 'management': 0.016129032258064516, 'report': 0.016129032258064516, 'executive': 0.016129032258064516, 'usually': 0.016129032258064516, 'contain': 0.016129032258064516, 'sensitive': 0.016129032258064516}))

    def test_compare_empty_keywords_nl(self):
        self.assertEqual(calculate_relations("Een alinea is het tekstgedeelte tussen twee inspringingen of tussen twee regels wit, de kleinste eenheid van een tekst die nog uit meerdere zinnen bestaat. De alinea is volgens schrijfadviseur Jan Renkema de belangrijkste bouwsteen van een tekst.[1] Incidenteel kan een alinea ook uit een enkele zin of zelfs uit een woord bestaan, maar alleen ter afwisseling met langere alinea's, bijvoorbeeld om het aanzien van een tekst gevarieerder te maken.", [], "nl"),Counter({'alinea': 0.12903225806451613,'tekstgedeelte': 0.03225806451612903,'twee': 0.06451612903225806,'inspringing': 0.03225806451612903,'regel': 0.03225806451612903,'wit': 0.03225806451612903,'klein': 0.03225806451612903,'eenheid': 0.03225806451612903,'tekst': 0.06451612903225806,'meerdere': 0.03225806451612903,'zin': 0.06451612903225806, 'bestaan': 0.06451612903225806,'schrijfadviseur': 0.03225806451612903,'jan': 0.03225806451612903,'renkema': 0.03225806451612903,'belangrijk': 0.03225806451612903,'bouwsteen': 0.03225806451612903,'tekst1': 0.03225806451612903,'incidenteel': 0.03225806451612903,'woord': 0.03225806451612903,'afwisseling': 0.03225806451612903, 'aanzien': 0.03225806451612903,'gevarieerd': 0.03225806451612903,'maken': 0.03225806451612903})
)

    def test_compare_empty_en(self):
        self.assertEqual(calculate_relations("",[], "en"), {})

    def test_compare_empty_nl(self):
        self.assertEqual(calculate_relations("",[], "nl"), {})